var SetPosAlongSpline=pc.createScript("setPosAlongSpline");SetPosAlongSpline.attributes.add("spline",{type:"entity",default:null}),SetPosAlongSpline.attributes.add("value",{type:"number",default:.5,max:1,min:0}),SetPosAlongSpline.attributes.add("smoothness",{type:"number",default:.1,max:1,min:0}),SetPosAlongSpline.attributes.add("useProgressValue",{type:"boolean",default:!1}),SetPosAlongSpline.prototype.initialize=function(){this.createPath(),this.spline.enabled=!1,this.entity.enabled=!0,this.lookAt=new pc.Vec3,this.up=new pc.Vec3,pc.data.progress=this.value,pc.data.smoothness=this.smoothness,this.on("attr:value",(function(t,e){pc.data.progress=t})),this.on("attr:smoothness",(function(t,e){pc.data.smoothness=t}))},SetPosAlongSpline.prototype.update=function(t){var e,s=void 0!==pc.data.progress?window.pc.data.progress:this.value,i=void 0!==pc.data.smoothness?window.pc.data.smoothness:this.smoothness;e=s/1;var n=new pc.Vec3(this.px.value(e),this.py.value(e),this.pz.value(e));n.lerp(this.entity.getPosition(),n,i),this.entity.setPosition(n);var p=new pc.Vec3(this.tx.value(e),this.ty.value(e),this.tz.value(e));p.lerp(this.entity.position.add(this.entity.forward),p,i),this.lookAt.set(p.x,p.y,p.z);var o=new pc.Vec3(this.ux.value(e),this.uy.value(e),this.uz.value(e));o.lerp(this.entity.up,o,i),this.up.set(o.x,o.y+90,o.z),this.entity.lookAt(this.lookAt,this.up)},SetPosAlongSpline.prototype.createPath=function(){var t=pc.CURVE_CARDINAL;this.px=new pc.Curve,this.px.type=t,this.py=new pc.Curve,this.py.type=t,this.pz=new pc.Curve,this.pz.type=t,this.tx=new pc.Curve,this.tx.type=t,this.ty=new pc.Curve,this.ty.type=t,this.tz=new pc.Curve,this.tz.type=t,this.ux=new pc.Curve,this.ux.type=t,this.uy=new pc.Curve,this.uy.type=t,this.uz=new pc.Curve,this.uz.type=t;var e=this.spline.children,s=0,n=[],p=new pc.Vec3;for(n.push(0),i=1;i<e.length-1;i++){var o=e[i-1],a=e[i];p.sub2(o.getPosition(),a.getPosition()),s+=p.length(),n.push(s)}for(i=0;i<e.length;i++){var h=n[i]/s,u=e[i],l=u.getPosition();this.px.add(h,l.x),this.py.add(h,l.y),this.pz.add(h,l.z);var r=l.clone().add(u.forward);this.tx.add(h,r.x),this.ty.add(h,r.y),this.tz.add(h,r.z);var d=u.up;this.ux.add(h,d.y),this.uy.add(h,d.x),this.uz.add(h,d.z)}};pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #000;","}","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #000;","}","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","#application-splash img {","    width: 100%;","}","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 4px;","    border-radius: 100px;","    width: 100%;","    background-color: #111;","}","#progress-bar {","    width: 0%;","    border-radius: 100px;","    transition: .1s;","    height: 100%;","    background-color: #333;","}","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t);var a=document.createElement("div");a.id="progress-bar-container",t.appendChild(a);var o=document.createElement("div");o.id="progress-bar",a.appendChild(o)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));var ProgressionForParticle=pc.createScript("progressionForParticle");ProgressionForParticle.attributes.add("point",{type:"number",default:.5,max:1,min:0}),ProgressionForParticle.attributes.add("distance",{type:"number",default:.1,max:1,min:0}),ProgressionForParticle.attributes.add("max",{type:"number",default:1,max:1,min:0}),ProgressionForParticle.attributes.add("min",{type:"number",default:0,max:1,min:0}),ProgressionForParticle.prototype.initialize=function(){this.entity.particlesystem.alphaGraph2=new pc.Curve},ProgressionForParticle.prototype.update=function(t){if(void 0!==this.entity){var e=pc.data.progress,i=pc.data.smoothness,r=this.point-this.distance,a=0;a=e<=this.point?(e-r)/this.distance:1-((e-r)/this.distance-1),a=pc.math.clamp(a,0,1),a=pc.math.lerp(this.min,this.max,a);var s=this.entity.particlesystem.alphaGraph.keys[1][1];if(s>a+.01||s<a-.01){var o=pc.math.lerp(s,a,i),n=new pc.Curve([0,0]);n.add(.5,o),n.add(1,0),this.entity.particlesystem.alphaGraph=n}}else console.log(this.entity)};var ScreenPosToWorld=pc.createScript("ScreenPosToWorld");ScreenPosToWorld.prototype.initialize=function(){pc.data.part={x:200,y:200,toggle:this.toggle.bind(this)},this.pos={x:200,y:200},this.lastClone=void 0},ScreenPosToWorld.prototype.update=function(t){if(this.pos!=={x:pc.data.part.x,y:pc.data.part.y}){this.pos={x:pc.data.part.x,y:pc.data.part.y};var e=this.entity.camera.screenToWorld(pc.data.part.x,pc.data.part.y,.2);this.entity.children[0].setPosition(e)}},ScreenPosToWorld.prototype.toggle=function(t){var e=this.entity.children[0],i=this.entity.children[0].children[0];if(t)this.lastClone=i.clone(),e.addChild(this.lastClone),this.lastClone.particlesystem.play();else if(void 0!==this.lastClone){var o=this.lastClone.getPosition();this.lastClone.reparent(this.entity),this.lastClone.setPosition(o),this.lastClone.particlesystem.stop()}};var ProgressionForLight=pc.createScript("progressionForLight");ProgressionForLight.attributes.add("point",{type:"number",default:.5,max:1,min:0}),ProgressionForLight.attributes.add("distance",{type:"number",default:.1,max:1,min:0}),ProgressionForLight.attributes.add("max",{type:"number",default:1,max:100,min:0}),ProgressionForLight.attributes.add("min",{type:"number",default:0,max:1,min:0}),ProgressionForLight.prototype.initialize=function(){},ProgressionForLight.prototype.update=function(t){var i=pc.data.progress,r=pc.data.smoothness,e=this.point-this.distance,s=0;s=i<=this.point?(i-e)/this.distance:1-((i-e)/this.distance-1),s=pc.math.clamp(s,0,1),s=pc.math.lerp(this.min,this.max,s);var a=this.entity.light.intensity;if(a>s+.01||a<s-.01){var n=pc.math.lerp(a,s,r)||0;this.entity.light.intensity=n}};var ProgressionForTransform=pc.createScript("progressionForTransform");ProgressionForTransform.attributes.add("point",{type:"number",default:.5,max:1,min:0}),ProgressionForTransform.attributes.add("distance",{type:"number",default:.1,max:1,min:0}),ProgressionForTransform.attributes.add("max",{type:"vec3",default:[0,0,0],max:[0,0,0],min:[0,0,0]}),ProgressionForTransform.attributes.add("min",{type:"vec3",default:[0,0,0],max:[0,0,0],min:[0,0,0]}),ProgressionForTransform.prototype.initialize=function(){},ProgressionForTransform.prototype.update=function(r){var t=pc.data.progress,e=pc.data.smoothness,s=this.point-this.distance,o=0;o=t<=this.point?(t-s)/this.distance:1-((t-s)/this.distance-1),o=pc.math.clamp(o,0,1);var a=new pc.Vec3;a.lerp(this.min,this.max,o);var i=this.entity.localTransform.getEulerAngles(),n=i.clone(),m=a.clone();if(n.ceil(),m.ceil(),i.x>a.x+.01||i.x<a.x-.01||i.y>a.y+.01||i.y<a.y-.01||i.z>a.z+.01||i.z<a.z-.01){var c=new pc.Vec3;c.lerp(i,a,e),this.entity.setLocalEulerAngles(c)}};